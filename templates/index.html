<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AIå­«ãƒœãƒƒãƒˆ</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>ğŸ‘µğŸ§’ AIå­«ãƒœãƒƒãƒˆ</h1>
    <p>ã‚ãªãŸãŒè©±ã—ã‹ã‘ã‚‹ã¨ã€å­«ã®å£°ã§è¿”äº‹ã‚’ã—ã¾ã™ã€‚</p>
    
    <div class="chat">
      <textarea id="message" placeholder="è©±ã—ã‹ã‘ã¦ã¿ã¦ãã ã•ã„"></textarea>
      <button id="sendBtn">è©±ã—ã‹ã‘ã‚‹</button>
    </div>

    <div id="replyArea"></div>
    <audio id="voice" controls></audio>
  </div>

  <script>
  document.getElementById("sendBtn").onclick = async () => {
    const msg = document.getElementById("message").value;
    const res = await fetch("/talk", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg, user_id: "demo" })
    });
    const data = await res.json();
    document.getElementById("replyArea").textContent = data.reply;
    document.getElementById("voice").src = data.audio + "?t=" + Date.now();
    document.getElementById("voice").play();
    document.getElementById("message").value = "";
  };
  </script>
</body>
</html>
