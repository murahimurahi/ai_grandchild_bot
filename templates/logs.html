<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä¼šè©±ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | ãŠã¯ãªã—æ¨ªä¸</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body class="logpage">
  <div class="container">
    <h1>ğŸ“† ä¼šè©±ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</h1>
    <p><a href="/">ğŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹</a></p>

    {% if logs %}
      <div class="calendar-grid">
        {% for log in logs %}
          <div class="calendar-cell" onclick="toggleDay('{{ log.date }}')">
            {{ log.date }}
          </div>
        {% endfor %}
      </div>

      {% for log in logs %}
        <div id="day-{{ log.date }}" class="log-day" style="display:none;">
          <h2>ğŸ—“ {{ log.date }}</h2>
          {% for entry in log.entries %}
            <div class="log-entry">
              <p><strong>ã‚ãªãŸï¼š</strong> {{ entry.user }}</p>
              <p><strong>ã‚†ã†ãã‚“ï¼š</strong> {{ entry.yuukun }}</p>
              {% if entry.audio_file %}
                <audio controls src="/logs_audio/{{ log.date }}/{{ entry.audio_file }}"></audio>
              {% endif %}
              <hr>
            </div>
          {% endfor %}
        </div>
      {% endfor %}
    {% else %}
      <p>ã¾ã ä¼šè©±ãƒ­ã‚°ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    {% endif %}
  </div>

  <script>
  function toggleDay(date) {
    const section = document.getElementById(`day-${date}`);
    const all = document.querySelectorAll('.log-day');
    all.forEach(s => s.style.display = 'none');
    section.style.display = 'block';
    section.scrollIntoView({ behavior: "smooth", block: "start" });
  }
  </script>
</body>
</html>
